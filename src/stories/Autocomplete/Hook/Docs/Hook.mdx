import { Story, Canvas, Meta, Markdown } from '@storybook/blocks';
import * as HooksStories from '../index.stories';
import {HooksTemplate} from '../index.tsx';
import SectionsType from '../Docs/Markdown/Sections.md';
import TotalNumResultsPerSectionType from '../Docs/Markdown/TotalNumResultsPerSection.md';
import PropGetters from '../Docs/Markdown/PropGetters.md';

import {
  apiKeyDescription,
  cioJsClientDescription,
  placeholderDescription,
  customStylesDescription,
  apiKey,
  onSubmitDefault as onSubmit,
  cioJsClientOptionsDescription,
} from '../../../../constants.ts';

<Meta of={HooksStories} name='Documentation' />

export const generateStory = (args) => {
return (
  <Canvas>
    <Story args={{ apiKey, onSubmit }}>
      {HooksTemplate.bind({})}
    </Story>
  </Canvas>
  );
}

# Hook 
  - import \`useCioAutocomplete\` and call this custom hook in a functional component.
  - This hook leaves rendering logic up to you, while handling:
    - state management
    - data fetching
    - keyboard navigation
    - mouse interactions
    - focus and submit event handling
    - accessibility
- To use this hook, an \`apiKey\` or \`cioJsClient\` are required, and an \`onSubmit\` callback must be passed to the \`useCioAutocomplete\` hook to configure behavior. All other values are optional.
- use the <a href="https://kentcdodds.com/blog/how-to-give-rendering-control-to-users-with-prop-getters" target="__blank">prop getters</a> and other variables returned by this hook (below) to leverage the functionality described above with jsx elements in your react component definitions

> **Important: Please note that all of the select or submit events should go through the \`onSubmit\` callback. The \`getItemProps\` hook returns click and keyboard handlers which should be applied to the elements using the spread operator (see code examples below). Adding an \`onClick\` event manually to the elements would override the default behavior of the library preventing it from sending tracking events and would cause different behavior between click and keyboard events. Selecting an item or submitting the search would both cause \`onSubmit\` to be called.**


## Returns

### query \* 

> `string` - Current input field value

  ```jsx
  const { query } = useCioAutocomplete(args);
  ```

### setQuery 

> `(string) => void` - Function to update the current input field value 

  ```jsx
  const { setQuery } = useCioAutocomplete(args);
  ```

### isOpen 

> `boolean` - Current state of the autocomplete menu 

  ```jsx
  const { isOpen } = useCioAutocomplete(args);
  ```

### openMenu 

> `() => void` - Function to open the autocomplete menu 

  ```jsx
  const { openMenu } = useCioAutocomplete(args);
  ```

### closeMenu

> `() => void` - Function to close the autocomplete menu 

  ```jsx
  const { closeMenu } = useCioAutocomplete(args);
  ```

### selectedItem

> `object` - Currently selected Item (via hover or keyboard navigation) 

  ```jsx
  const { selectedItem } = useCioAutocomplete(args);
  ```

### sections \* 

> `section[]` - Array of section data to render in menu list 

  ```jsx
  const { sections } = useCioAutocomplete(args);
  ```

{/* -------- STATE -------- */}
<Markdown>{SectionsType}</Markdown>
<hr />

### totalNumResultsPerSection \*

> `object` - Object indicating total number of results returned in each section 

  ```jsx
  const { totalNumResultsPerSection } = useCioAutocomplete(args);
  ```

{/* -------- STATE -------- */}
<Markdown>{TotalNumResultsPerSectionType}</Markdown>
<hr />

## Prop Getters

{/* -------- STATE -------- */}
<Markdown>{PropGetters}</Markdown>
<hr />

### cioJsClient - `object`

> Constructor io client instance 

  ```jsx
  const { cioJsClient } = useCioAutocomplete(args);
  ```
