#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if README.md is being pushed
if git diff --name-only HEAD @{push} | grep -q "README.md"; then
  echo "README.md changes detected. Running doctoc..."
  npx doctoc README.md
  
  # If doctoc made changes, add them
  if git diff --quiet README.md; then
    echo "No TOC changes needed"
  else
    echo "TOC was updated. Please commit the changes and try pushing again."
    exit 1
  fi
fi
